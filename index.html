<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic Tic Tac Toe</title>
    <style>
        :root {
            --neon-cyan: #0ff;
            --neon-pink: #f0f;
            --space-black: #00001a;
            --star-twinkle: rgba(255, 255, 255, 0.8);
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #000428, #004e92);
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-cyan);
            overflow: hidden;
        }

        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .game-container {
            position: relative;
            z-index: 1;
            padding: 2rem;
            border-radius: 15px;
            background: rgba(0, 0, 30, 0.8);
            box-shadow: 0 0 50px var(--neon-pink);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 2rem 0;
        }

        .cell {
            width: 90px;
            height: 90px;
            background: rgba(0, 0, 50, 0.5);
            border: 2px solid var(--neon-cyan);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cell:hover {
            box-shadow: 0 0 20px var(--neon-cyan);
            transform: scale(1.05);
        }

        .cell.x::before {
            content: '✧';
            color: var(--neon-cyan);
            font-size: 4rem;
            animation: shootingStar 0.5s ease-out;
        }

        .cell.o::before {
            content: '○';
            color: var(--neon-pink);
            font-size: 4rem;
            animation: pulsate 1s infinite;
        }

        @keyframes shootingStar {
            0% { transform: translate(-100px, 100px); opacity: 0; }
            100% { transform: translate(0); opacity: 1; }
        }

        @keyframes pulsate {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .winning-line {
            position: absolute;
            background: linear-gradient(90deg, 
                rgba(255,0,255,0) 0%,
                rgba(255,0,255,1) 50%,
                rgba(255,0,255,0) 100%);
            animation: laser 1s infinite;
        }

        @keyframes laser {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        button {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: var(--neon-cyan);
            color: var(--space-black);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        #status {
            text-align: center;
            font-size: 1.2rem;
            margin: 1rem 0;
            min-height: 24px;
        }

        @media (max-width: 600px) {
            .cell {
                width: 70px;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="game-container">
        <h1>Galactic Tic Tac Toe</h1>
        <div class="controls">
            <button id="pvp">Player vs Player</button>
            <button id="pvc">Player vs AI</button>
            <button id="reset">Reset</button>
        </div>
        <div id="status">Choose a game mode!</div>
        <div class="board" id="board"></div>
    </div>

    <script>
        class Game {
            constructor() {
                this.board = Array(9).fill('');
                this.currentPlayer = 'X';
                this.gameMode = null;
                this.gameActive = false;
                this.sounds = {
                    click: new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU'),
                    win: new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU'),
                    draw: new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU')
                };
                this.init();
            }

            init() {
                this.createBoard();
                this.setupEventListeners();
                this.createStars();
            }

            createBoard() {
                const board = document.getElementById('board');
                board.innerHTML = '';
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.index = i;
                    board.appendChild(cell);
                }
            }

            setupEventListeners() {
                document.getElementById('pvp').addEventListener('click', () => this.setGameMode('pvp'));
                document.getElementById('pvc').addEventListener('click', () => this.setGameMode('pvc'));
                document.getElementById('reset').addEventListener('click', () => this.resetGame());
                document.getElementById('board').addEventListener('click', (e) => this.handleClick(e));
            }

            setGameMode(mode) {
                this.gameMode = mode;
                this.resetGame();
                this.gameActive = true;
                document.getElementById('status').textContent = 
                    `${mode === 'pvp' ? 'Player 1' : 'Player'}'s turn (X)`;
                if (mode === 'pvc' && this.currentPlayer === 'O') this.aiMove();
            }

            handleClick(e) {
                if (!this.gameActive) return;
                const index = e.target.dataset?.index;
                if (index && !this.board[index]) {
                    this.makeMove(index);
                    if (this.gameMode === 'pvc' && this.gameActive) {
                        setTimeout(() => this.aiMove(), 500);
                    }
                }
            }

            makeMove(index) {
                this.board[index] = this.currentPlayer;
                this.updateBoard();
                if (this.checkWin()) {
                    this.handleWin();
                } else if (this.board.every(cell => cell)) {
                    this.handleDraw();
                } else {
                    this.currentPlayer = this.currentPlayer === 'X' ? 'O' : 'X';
                    this.updateStatus();
                }
            }

            aiMove() {
                const bestMove = this.minimax(this.board, 'O').index;
                this.makeMove(bestMove);
            }

            minimax(board, player) {
                const availableMoves = board.reduce((acc, cell, index) => 
                    (!cell ? [...acc, index] : acc), []);

                if (this.checkWinFor('X', board)) return { score: -10 };
                if (this.checkWinFor('O', board)) return { score: 10 };
                if (!availableMoves.length) return { score: 0 };

                const moves = availableMoves.map(index => {
                    const newBoard = [...board];
                    newBoard[index] = player;
                    const result = this.minimax(newBoard, 
                        player === 'O' ? 'X' : 'O');
                    return { index, score: result.score };
                });

                return player === 'O' ? 
                    moves.reduce((best, current) => 
                        current.score > best.score ? current : best, { score: -Infinity }) :
                    moves.reduce((best, current) => 
                        current.score < best.score ? current : best, { score: Infinity });
            }

            checkWin() {
                return this.checkWinFor(this.currentPlayer, this.board);
            }

            checkWinFor(player, board) {
                const winPatterns = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                    [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                    [0, 4, 8], [2, 4, 6] // Diagonals
                ];
                return winPatterns.some(pattern =>
                    pattern.every(index => board[index] === player));
            }

            updateBoard() {
                this.board.forEach((cell, index) => {
                    const cellElement = document.querySelector(`[data-index="${index}"]`);
                    cellElement.className = `cell ${cell.toLowerCase()}`;
                });
            }

            handleWin() {
                this.gameActive = false;
                document.getElementById('status').textContent = 
                    `${this.gameMode === 'pvp' ? 'Player ' + (this.currentPlayer === 'X' ? '1' : '2') : 
                    this.currentPlayer === 'X' ? 'Player' : 'AI'} wins!`;
                this.animateWinningLine();
            }

            handleDraw() {
                this.gameActive = false;
                document.getElementById('status').textContent = "Cosmic Stalemate!";
            }

            animateWinningLine() {
                // Implementation for animating winning line
            }

            updateStatus() {
                const status = document.getElementById('status');
                if (this.gameMode === 'pvp') {
                    status.textContent = `Player ${this.currentPlayer === 'X' ? '1' : '2'}'s turn`;
                } else {
                    status.textContent = this.currentPlayer === 'X' ? 
                        "Your turn" : "AI is thinking...";
                }
            }

            resetGame() {
                this.board = Array(9).fill('');
                this.currentPlayer = 'X';
                this.gameActive = false;
                this.updateBoard();
                document.getElementById('status').textContent = "Choose a game mode!";
            }

            createStars() {
                const starsContainer = document.getElementById('stars');
                for (let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.width = `${Math.random() * 2}px`;
                    star.style.height = star.style.width;
                    star.style.animationDelay = `${Math.random() * 2}s`;
                    starsContainer.appendChild(star);
                }
            }
        }

        // Initialize the game
        const game = new Game();
    </script>
</body>
</html>